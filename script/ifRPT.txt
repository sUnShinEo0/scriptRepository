import com.smy.framework.core.util.*;
import com.smy.rms.front.enums.EventType;

String result = "-9999";
if (StringUtils.isBlank(eventType) || StringUtils.isBlank(custNo)){
    log("getIfInChgRgsPhoneTime方法传入参数为空！变量取默认值-9999", "debug");
    return result;
}
//gaiadsda dsada
Map pagram = new HashMap();
Date modifyStartDate = null;
Date modifyEndDate = null;
String finalCreateDateTimeStr = null;
Date finalCreateDateTime = null;
if (EventType.CREDIT_AWARD.getCode().equalsIgnoreCase(eventType)) {
    if (StringUtils.isBlank(applyNo)){
        log("传入参数中的applyNo为空！变量取默认值-9999", "debug");
        return result;
    }
    
    param.clear();
    param.put("apply_no", applyNo);
    List list = (List)getDataSet(applyInfoById, param);
    if(CollectionUtil.isNotEmpty(list)) {
        Map infoMap = (HashMap)list.get(0);
        if(CollectionUtil.isNotEmpty(infoMap)) {
	        Integer createDate = (Integer)infoMap.get("CREATE_DATE");
            String createTime = (String)infoMap.get("CREATE_TIME");
            if(null == createDate || StringUtils.isBlank(createTime)) {
                return result;        
            }
            finalCreateDateTimeStr = String.valueOf(createDate) + createTime;
        }
    } else {
        log("查询crs获取授信事件为空！变量取默认值-9999", "debug");
    }
} else if (EventType.LOAN.getCode().equalsIgnoreCase(eventType)) {
    if (StringUtils.isBlank(rskLogId)){
        log("传入参数中的风控日志ID为空！变量取默认值-9999", "debug");
        return result;
    }
    
    param.clear();
    param.put("rskLogId", rskLogId);
    List list = (List)getDataSet(rskMonitorLogById, param);
    if(CollectionUtil.isNotEmpty(list)) {
        Map infoMap = (HashMap)list.get(0);
        if(CollectionUtil.isNotEmpty(infoMap)) {
	        Integer createDate = (Integer)infoMap.get("CREATE_DATE");
            String createTime = (String)infoMap.get("CREATE_TIME");
            if(null == createDate || StringUtils.isBlank(createTime)) {
                return result;        
            }
            finalCreateDateTimeStr = String.valueOf(createDate) + createTime;
        }
    } else {
        log("查询rms获取提现事件为空！变量取默认值-9999", "debug");
    }
} else {
    log("传入的事件类型未命中授信和借款事件！变量取默认值-9999", "debug");
}

if(StringUtils.isNotEmpty(finalCreateDateTimeStr)) {
    finalCreateDateTime = DateUtil.parseDate(finalCreateDateTimeStr, DateUtil.DATE_FROMAT_YYYYMMDDHHMMSS);
}

if (finalCreateDateTime == null){
    log("查询事件,获取的创建时间为空！变量取默认值-9999; eventType is " + eventType, "debug");
    return result;
}

param.clear();
param.put("difType", "07");
param.put("custNo", custNo);
List list = (List)getDataSet(custModifyStatusByDifTypeCustNo, param);
if(CollectionUtil.isNotEmpty(list)) {
    Map infoMap = (HashMap)list.get(0);
    if(CollectionUtil.isNotEmpty(infoMap)) {
        modifyStartDate = (Date)infoMap.get("CREATE_TIMESTAMP");
        modifyEndDate = (Date)infoMap.get("UPDATE_TIMESTAMP");
        if(null == modifyStartDate || null == modifyEndDate) {
            result = "02";        
        } else {
            log("查询事件: " + eventType + " ,创建时间: " + finalCreateDateTime + " ,查询ics时间; createTime is " + modifyStartDate + " ,updateTime is " + modifyEndDate, "debug");
            
            String applyStatus = (String)infoMap.get("APPLY_STATUS");
            if("F".equals(applyStatus)) {
                return finalCreateDateTime + "_" + modifyEndDate + "_" + modifyStartDate;
                if (finalCreateDateTime.compareTo(modifyEndDate) == 1 
                    || finalCreateDateTime.compareTo(modifyStartDate) == -1){
                        
                    log("事件" + eventType + "的创建时间不在修改注册手机号的起止时间内！变量取值02", "debug");
                    result = "02";
                } else{
                    log("事件" + eventType + "的创建时间在修改注册手机号的起止时间内！变量取值01", "debug");
                    result = "01";
                }
            } else {
                if (finalCreateDateTime.compareTo(modifyStartDate) == -1){
                    log("事件" + eventType + "的创建时间不在修改注册手机号的起止时间内！变量取值02", "debug");
                    result = "02";
                } else {
                    log("事件" + eventType + "的创建时间在修改注册手机号的起止时间内！变量取值01", "debug");
                    result = "01";
                }
            }
        }
    }
} else {
    log("查询ics获取修改注册手机号事件的信息为空！变量取默认值02", "debug");
    result = "02";
}

return result;
